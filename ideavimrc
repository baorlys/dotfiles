" ============================================================================
" Author: Bao Ly
" ============================================================================

" --- BASIC SETUP ---
let mapleader = " "
set scrolloff=5
set incsearch
set hlsearch
set ignorecase
set smartcase
set number
set relativenumber
set clipboard+=unnamed
set ideajoin
set ideacopypreprocess

" Plugins
set surround
set commentary
set textobj-entire
set easymotion
set highlightedyank
set which-key
set notimeout

" --- 1. WINDOWS & TABS ---
" Split Navigation
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l

" Split Creation
nnoremap <leader>v :action SplitVertically<CR>
nnoremap <leader>s :action SplitHorizontally<CR>

" Tab Navigation
nnoremap <leader>tc :action CloseContent<CR>
nnoremap <leader>to :action CloseAllEditorsButActive<CR>

" --- 2. EDITING ---
" Exit Insert
inoremap jj <Esc>
inoremap fd <Esc>

" Move Lines
nnoremap <A-j> :action MoveLineDown<CR>
nnoremap <A-k> :action MoveLineUp<CR>
vnoremap <A-j> :action MoveLineDown<CR>
vnoremap <A-k> :action MoveLineUp<CR>

" Smart Paste
vnoremap p "_dP

" Smart Enter (Java God Mode)
inoremap <S-Enter> <Esc>:action EditorCompleteStatement<CR>a

" --- 3. NAVIGATION ---
nnoremap gd :action GotoDeclaration<CR>
nnoremap gi :action GotoImplementation<CR>
nnoremap gu :action FindUsages<CR>
" File Structure
nnoremap <leader>o :action FileStructurePopup<CR>
" Select file in Project Tree
nnoremap <leader>e :action SelectInProjectView<CR>
" Recent Locations
nnoremap <leader>rl :action RecentLocations<CR>
" Method Jump
nnoremap ]m :action MethodDown<CR>
nnoremap [m :action MethodUp<CR>

nnoremap <C-o> :action Back<CR>
nnoremap <C-i> :action Forward<CR>
" --- 4. REFACTORING ---
nnoremap <leader>rn :action RenameElement<CR>
nnoremap <leader>rf :action ReformatCode<CR>
nnoremap <leader>ri :action OptimizeImports<CR>
nnoremap <leader>. :action ShowIntentionActions<CR>

vnoremap <leader>rv :action IntroduceVariable<CR>
vnoremap <leader>rm :action ExtractMethod<CR>
vnoremap <leader>rc :action IntroduceConstant<CR>
vnoremap <leader>rf :action IntroduceField<CR>

" --- 5. DEBUGGING ---
nnoremap <leader>db :action ToggleLineBreakpoint<CR>
nnoremap <leader>dr :action Debug<CR>
nnoremap <leader>di :action StepInto<CR>
nnoremap <leader>si :action SmartStepInto<CR>
nnoremap <leader>dj :action StepOver<CR>
nnoremap <leader>do :action StepOut<CR>
nnoremap <leader>dc :action Resume<CR>
nnoremap <leader>de :action EvaluateExpression<CR>
nnoremap <leader>ds :action TraceCurrentStreamChain<CR>

" --- 6. GIT OPERATIONS ---
nnoremap <leader>ga :action Annotate<CR>
nnoremap <leader>gh :action Vcs.ShowTabbedFileHistory<CR>
nnoremap <leader>gr :action Vcs.RollbackChangedLines<CR>
nnoremap ]c :action Vcs.Show.NextChangeMarker<CR>
nnoremap [c :action Vcs.Show.PrevChangeMarker<CR>

" --- 7. MISC ---
" Clear Highlight
nnoremap <leader>h :nohlsearch<CR>
" Parameter Info
nnoremap <leader>p :action ParameterInfo<CR>
" Error Navigation
nnoremap ]e :action GotoNextError<CR>
nnoremap [e :action GotoPreviousError<CR>
" Easy Motion
map s <Plug>(easymotion-s2)

" --- 8. APPEARANCE ---
nnoremap <leader>1 :action ActiveProjectToolWindow<CR>
nnoremap <leader>2 :action ToggleDistractionFreeMode<CR>
nnoremap <leader>3 :action TogglePresentationMode<CR>

" --- 9. TABS ---
nnoremap <leader>pi :action PinActiveTab<CR>
